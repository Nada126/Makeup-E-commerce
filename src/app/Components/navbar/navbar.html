<header class="background sticky-top fw-bold shadow-sm">
  <nav class="navbar navbar-expand-lg container py-2">
    <!-- ðŸŒ¸ Logo -->
    <a class="navbar-brand fw-bold d-flex align-items-center" routerLink="/home">
      <img src="images/Logo1.png" alt="Glow Up Logo" class="logo-img me-2" />
      <span class="brand-name d-none d-md-block">Glow Up</span>
    </a>

    <!-- ðŸŒŸ USER NAVBAR (Shown for guests and non-admin users) -->
    @if (!isLoggedIn || !isAdmin) {
      <!-- Mobile Toggler -->
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarMenu"
        aria-controls="navbarMenu"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>

      <!-- Center Menu -->
      <div class="collapse navbar-collapse justify-content-center" id="navbarMenu">
        <ul class="navbar-nav mb-2 mb-lg-0 text-center">
          <li class="nav-item">
            <a class="nav-link" routerLink="/home" routerLinkActive="active">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" routerLink="/about" routerLinkActive="active">About Us</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" routerLink="/products" routerLinkActive="active">Products</a>
          </li>
        </ul>

        <!-- Right Section for Mobile -->
        <div class="d-flex align-items-center gap-3 d-lg-none justify-content-center mt-3">
          <!-- Favorites -->
          <a class="nav-link icon-btn position-relative" routerLink="/favourites" routerLinkActive="active">
            <i class="bi bi-heart"></i>
            @if (favoriteCount > 0) {
              <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                {{ favoriteCount }}
              </span>
            }
          </a>

          <!-- Cart -->
          <a class="nav-link icon-btn position-relative" routerLink="/cart" routerLinkActive="active">
            <i class="bi bi-cart3"></i>
            @if (cartCount > 0) {
              <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                {{ cartCount }}
              </span>
            }
          </a>

          <!-- User Dropdown for Mobile -->
          <div class="nav-item dropdown">
            <a
              class="nav-link dropdown-toggle d-flex align-items-center"
              href="#"
              id="userDropdownMobile"
              role="button"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              @if (isLoggedIn) {
                <img
                  [src]="user?.avatar || 'assets/images/default-avatar.png'"
                  alt="User Avatar"
                  class="rounded-circle"
                  width="35"
                  height="35"
                />
              } @else {
                <i class="bi bi-person-circle fs-4"></i>
              }
            </a>

            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdownMobile">
              @if (isLoggedIn) {
                @if (isAdmin) {
                  <li>
                    <button class="dropdown-item" (click)="goToDashboard()">Dashboard</button>
                  </li>
                }
                <li>
                  <button class="dropdown-item" (click)="logout()">Logout</button>
                </li>
              } @else {
                <li><a class="dropdown-item" routerLink="/login">Login</a></li>
                <li><a class="dropdown-item" routerLink="/register">Register</a></li>
              }
            </ul>
          </div>
        </div>
      </div>

      <!-- Right Section for Desktop -->
      <div class="d-none d-lg-flex align-items-center gap-3 ms-auto">
        <!-- Favorites -->
        <a class="nav-link icon-btn position-relative" routerLink="/favourites" routerLinkActive="active">
          <i class="bi bi-heart"></i>
          @if (favoriteCount > 0) {
            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
              {{ favoriteCount }}
            </span>
          }
        </a>

        <!-- Cart -->
        <a class="nav-link icon-btn position-relative" routerLink="/cart" routerLinkActive="active">
          <i class="bi bi-cart3"></i>
          @if (cartCount > 0) {
            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
              {{ cartCount }}
            </span>
          }
        </a>

        <!-- User Dropdown for Desktop -->
        <div class="nav-item dropdown">
          <a
            class="nav-link dropdown-toggle d-flex align-items-center"
            href="#"
            id="userDropdownDesktop"
            role="button"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            @if (isLoggedIn) {
              <img
                [src]="user?.avatar || 'assets/images/default-avatar.png'"
                alt="User Avatar"
                class="rounded-circle"
                width="35"
                height="35"
              />
            } @else {
              <i class="bi bi-person-circle fs-4"></i>
            }
          </a>

          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdownDesktop">
            @if (isLoggedIn) {
              @if (isAdmin) {
                <li>
                  <button class="dropdown-item" (click)="goToDashboard()">Dashboard</button>
                </li>
              }
              <li>
                <button class="dropdown-item" (click)="logout()">Logout</button>
              </li>
            } @else {
              <li><a class="dropdown-item" routerLink="/login">Login</a></li>
              <li><a class="dropdown-item" routerLink="/register">Register</a></li>
            }
          </ul>
        </div>
      </div>
    }

    <!-- ðŸ§‘â€ðŸ’¼ ADMIN NAVBAR -->
    @else {
      <!-- Mobile Toggler for Admin -->
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarAdminMenu"
        aria-controls="navbarAdminMenu"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>

      <!-- Admin Menu -->
      <div class="collapse navbar-collapse justify-content-center" id="navbarAdminMenu">
        <ul class="navbar-nav mb-2 mb-lg-0 text-center">
          <li class="nav-item">
            <a class="nav-link" routerLink="/admin/add-product" routerLinkActive="active">Add Product</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" routerLink="/admin/products" routerLinkActive="active">Manage Products</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" routerLink="/admin/reviews" routerLinkActive="active">Manage Reviews</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" routerLink="/admin" routerLinkActive="active">Dashboard</a>
          </li>
        </ul>

        <!-- Admin Right Section for Mobile -->
        <div class="d-flex align-items-center gap-3 d-lg-none justify-content-center mt-3">
          <a
            class="nav-link icon-btn"
            (click)="logout()"
            title="Logout"
            style="cursor: pointer;"
          >
            <i class="bi bi-box-arrow-right"></i>
          </a>
        </div>
      </div>

      <!-- Admin Right Section for Desktop -->
      <div class="d-none d-lg-flex align-items-center gap-3 ms-auto">
        <a
          class="nav-link icon-btn"
          (click)="logout()"
          title="Logout"
          style="cursor: pointer;"
        >
          <i class="bi bi-box-arrow-right"></i>
        </a>
      </div>
    }
  </nav>
</header>
