<div class="admin-dashboard">
  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="sidebar-header">
      <h2>Glow Up</h2>
      <p>Management Panel</p>
    </div>

    <nav class="sidebar-nav">
      @for (link of [
        { path: '/admin/add-product', icon: '‚ûï', label: 'Add Product' },
        { path: '/admin/products', icon: 'üõçÔ∏è', label: 'Manage Products' },
        { path: '/admin/reviews', icon: '‚≠ê', label: 'Manage Reviews' }
      ]; track link.label) {
        <div class="nav-item" [routerLink]="link.path">
          <span class="nav-icon">{{ link.icon }}</span>
          <span class="nav-text">{{ link.label }}</span>
        </div>
      }
    </nav>

    <div class="sidebar-stats">
      <div class="stat-item">
        <span class="stat-number">{{ productsCount }}</span>
        <span class="stat-label">Total Products</span>
      </div>
      <div class="stat-item">
        <span class="stat-number">{{ reviewsCount }}</span>
        <span class="stat-label">Total Reviews</span>
      </div>
      <div class="stat-item">
        <span class="stat-number">{{ pendingReviewsCount }}</span>
        <span class="stat-label">Pending Reviews</span>
      </div>
    </div>
  </aside>

  <!-- Main Content -->
  <main class="main-content">
    <header class="content-header">
      <div class="header-title">
        <h1>Dashboard Analytics</h1>
        <p>Visual insights into your cosmetics store performance</p>
      </div>

      <div class="header-actions">
        <div class="user-welcome">
          <span>Hello, Admin! üëã</span>
        </div>
        <!-- Logout icon now in header instead of sidebar -->
        <a
          class="nav-link icon-btn"
          title="Logout"
          style="cursor: pointer;"
        >
          <i class="bi bi-box-arrow-right"></i>
        </a>
      </div>
    </header>

    <!-- Stats Grid -->
    <div class="stats-grid">
      <div class="stat-card products">
        <div class="stat-icon">üõçÔ∏è</div>
        <div class="stat-info">
          <h3>Total Products</h3>
          <span class="stat-number">{{ productsCount }}</span>
          <span class="stat-change">Across all categories</span>
        </div>
      </div>

      <div class="stat-card reviews">
        <div class="stat-icon">‚≠ê</div>
        <div class="stat-info">
          <h3>Customer Reviews</h3>
          <span class="stat-number">{{ reviewsCount }}</span>
          @if (pendingReviewsCount > 0) {
            <span class="stat-change" style="color: #ff6f91;">
              {{ pendingReviewsCount }} pending
            </span>
          } @else {
            <span class="stat-change" style="color: #48bb78;">
              All processed
            </span>
          }
        </div>
      </div>

      <div class="stat-card rating">
        <div class="stat-icon">üìà</div>
        <div class="stat-info">
          <h3>Avg Rating</h3>
          <span class="stat-number">{{ averageRating.toFixed(1) }}/5</span>
          <span class="stat-change">Overall product quality</span>
        </div>
      </div>

      <div class="stat-card categories">
        <div class="stat-icon">üìÅ</div>
        <div class="stat-info">
          <h3>Categories</h3>
          <span class="stat-number">{{ categoriesCount }}</span>
          <span class="stat-change">Product variety</span>
        </div>
      </div>
    </div>

    <!-- Charts Section -->
    <div class="charts-section">
      <div class="chart-row">
        <div class="chart-card">
          <div class="chart-container">
            <canvas id="reviewDistributionChart"></canvas>
          </div>
        </div>

        <div class="chart-card">
          <div class="chart-container">
            <canvas id="categoryDistributionChart"></canvas>
          </div>
        </div>
      </div>

      <div class="chart-row">
        <div class="chart-card">
          <div class="chart-container">
            <canvas id="ratingDistributionChart"></canvas>
          </div>
        </div>

        <div class="chart-card">
          <div class="chart-container">
            <canvas id="topProductsChart"></canvas>
          </div>
        </div>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions">
      <h2>Quick Actions</h2>
      <div class="actions-grid">
        @for (action of [
          { path: '/admin/add-product', icon: '‚ûï', title: 'Add New Product', text: 'Expand your product catalog' },
          { path: '/admin/products', icon: 'üõçÔ∏è', title: 'Manage Products', text: 'Edit or remove existing products' },
          { path: '/admin/reviews', icon: '‚≠ê', title: 'Manage Reviews', text: 'Moderate customer feedback' },
          { path: '', icon: 'üîÑ', title: 'Refresh Data', text: 'Update charts with latest data', click: true }
        ]; track action.title) {
          <div
            class="action-card"
            [routerLink]="!action.click ? action.path : null"
            (click)="action.click && createCharts()"
          >
            <div class="action-icon">{{ action.icon }}</div>
            <h3>{{ action.title }}</h3>
            <p>{{ action.text }}</p>
            <div class="action-arrow">‚Üí</div>
          </div>
        }
      </div>
    </div>
  </main>
</div>
